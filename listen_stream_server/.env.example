# ─────────────────────────────────────────────────────────────────────────────
# listen-stream server — environment variable reference
#
# Copy this file to .env and fill in all values marked <REQUIRED>.
# Lines starting with # are comments and are ignored.
# ─────────────────────────────────────────────────────────────────────────────

# ── Shared (all services) ─────────────────────────────────────────────────────

# PostgreSQL connection string.
# docker-compose overrides this per service; set here for local dev.
DATABASE_URL=postgres://listen:listen@localhost:5432/listen_stream?sslmode=disable

# Redis connection string.
REDIS_URL=redis://localhost:6379/0

# AES-256-GCM encryption key for system_configs table.
# MUST be exactly 64 lowercase hex characters (32 bytes).
# Generate: openssl rand -hex 32
# <REQUIRED> — all services refuse to start without a valid key.
CONFIG_ENCRYPTION_KEY=<REPLACE_WITH_64_HEX_CHARS>

# ── auth-svc ──────────────────────────────────────────────────────────────────

# Listening port (docker-compose overrides with service-specific value).
PORT=8001

# ── proxy-svc ────────────────────────────────────────────────────────────────

# PORT=8002

# Upstream music API base URL (no trailing slash).
# Used by the proxy handler when forwarding requests.
UPSTREAM_API_BASE_URL=https://api.example-music.com

# ── sync-svc ─────────────────────────────────────────────────────────────────

# PORT=8003

# ── admin-svc ────────────────────────────────────────────────────────────────

# PORT=8004

# ── Runtime config keys (seeded via admin panel or init script) ───────────────
#
# The following are NOT environment variables; they are stored encrypted in
# the system_configs PostgreSQL table and read at runtime via ConfigService.
# They are listed here for documentation purposes.
#
#   USER_JWT_SECRET       HMAC-SHA256 signing key for user Access Tokens
#   ADMIN_JWT_SECRET      HMAC-SHA256 signing key for admin Access Tokens
#   ACCESS_TOKEN_TTL      AT lifetime in seconds          (default: 7200)
#   REFRESH_TOKEN_TTL     RT lifetime in seconds          (default: 2592000)
#   SMS_PROVIDER_KEY      API key for the SMS gateway
#   SMS_DAILY_LIMIT       Per-phone SMS code limit per day (default: 5)
#   PROXY_CACHE_TTL       Redis proxy cache TTL in seconds (default: 300)
